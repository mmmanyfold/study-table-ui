(this["webpackJsonpstudy-table-ui"]=this["webpackJsonpstudy-table-ui"]||[]).push([[0],{183:function(e,t,n){},184:function(e,t,n){"use strict";n.r(t);var i=n(1),c=n.n(i),a=n(67),r=n.n(a),s=(n(73),n(11)),l=n(25),o=n(14),u=n(34),d=n.n(u),j=n(68),b=n(5),v=function(){var e=Object(i.useState)({width:void 0,height:void 0}),t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(i.useEffect)((function(){function e(){c({width:window.innerWidth,height:window.innerHeight})}return window.addEventListener("resize",e),e(),function(){return window.removeEventListener("resize",e)}}),[]),n},f=n(35),h=n.n(f),m=n(0);var O=function(e){var t=e.data,n=e.visible,c=e.mobile,a=e.windowSize,r=Object(i.useState)(null),s=Object(b.a)(r,2),l=s[0],o=s[1],u=function(e){o(e)};return Object(m.jsxs)("div",{className:"grid-scrollview",style:n?null:{display:"none"},children:[Object(m.jsxs)("div",{className:"grid",children:[null===t||void 0===t?void 0:t.map((function(e,t){return Object(m.jsx)(g,{item:e,mobile:c,onMobileSelect:u},"".concat(e.id,"-").concat(t))})),!t.length&&Object(m.jsx)("div",{className:"no-results",children:"No artists match your criteria."})]}),Object(m.jsx)(x,{artist:l,windowSize:a,onReturn:function(){o(null)}})]})},g=function(e){var t=e.item,n=e.mobile,c=e.onMobileSelect,a=Object(i.useState)(!1),r=Object(b.a)(a,2),s=r[0],l=r[1],o=p(n||!s,t),u=t.fields,d=u.Name,j=u.Info,v=u.Tags;return Object(m.jsx)("div",{className:"grid-item",children:Object(m.jsxs)("div",{onClick:function(){n?c(t):l(t)},className:"artist-card ".concat(s?"selected":""),children:[Object(m.jsxs)("div",{style:{position:"relative"},children:[Object(m.jsx)("div",{className:"artist-thumb",style:o,children:s&&!n&&Object(m.jsx)("div",{className:"artist-info",children:j?Object(m.jsx)(h.a,{linkTarget:"_blank",children:j}):Object(m.jsx)("p",{children:"No information at this time."})})}),s&&!n&&Object(m.jsx)("div",{role:"button",onClick:function(e){e.stopPropagation(),l(null)},className:"artist-return-btn",children:"\u2190"})]}),Object(m.jsxs)("div",{className:"artist-heading",children:[Object(m.jsx)("div",{className:"artist-name",children:d}),Object(m.jsx)("div",{className:"artist-tags",children:null===v||void 0===v?void 0:v.map((function(e,t){return Object(m.jsx)("div",{className:"artist-tag",children:e},"".concat(e,"-").concat(t))}))})]})]})})},x=function(e){var t=e.artist,n=e.windowSize,i=e.onReturn;if(!t)return null;var c=t.fields,a=c.Name,r=c.Info,s=p(!0,t),l=n.height-100;return Object(m.jsxs)("div",{className:"artist-mobile-view",style:{height:l},children:[Object(m.jsx)("div",{className:"artist-mobile-return",role:"button",onClick:i,children:"\u2190 Back to Artists"}),Object(m.jsxs)("div",{className:"artist-mobile-card",children:[Object(m.jsx)("div",{style:Object(o.a)(Object(o.a)({},s),{},{height:.5*(l-32)})}),Object(m.jsxs)("div",{className:"artist-mobile-info",children:[Object(m.jsx)("div",{className:"artist-mobile-name",children:a}),r?Object(m.jsx)(h.a,{linkTarget:"_blank",children:r}):Object(m.jsx)("p",{children:"No information at this time."})]})]})]})},p=function(e,t){var n;if(!e)return null;var i=null===t||void 0===t||null===(n=t.fields)||void 0===n?void 0:n.Image;if(!(null===i||void 0===i?void 0:i.length))return{backgroundColor:"#f8f8f8"};var c=i[0].thumbnails.large.url;return{backgroundImage:"url(".concat(c,")"),backgroundSize:"contain",backgroundPosition:"center",backgroundRepeat:"no-repeat"}},w=n.p+"static/media/close-icon.7f549529.svg",N=function(e){var t=e.data,n=e.active,i=e.visible,c=e.windowSize,a=e.onSelect,r=e.onClear,s=n.length;return Object(m.jsxs)("div",{children:[i&&Object(m.jsx)("div",{className:"filters-header",children:s?Object(m.jsxs)("div",{role:"button",onClick:r,style:{cursor:"pointer"},children:["Clear all (",s,")",Object(m.jsx)("img",{src:w,alt:"X Icon",style:{marginLeft:"8px"}})]}):Object(m.jsx)("div",{children:"Tags"})}),Object(m.jsx)("div",{className:"filters-scrollview",style:{height:c.height,display:i?"block":"none"},children:Object(m.jsx)("div",{className:"filters-container",children:t.map((function(e){return Object(m.jsxs)("div",{className:"tag-wrapper",children:[Object(m.jsx)("input",{type:"checkbox",id:e.id,name:"tag",value:C(e,n),style:{display:"none"}}),Object(m.jsx)("div",{htmlFor:e.id,onClick:function(){return a(e)},className:S(e,n),children:Object(m.jsx)("div",{children:e.name})})]},e.id)}))})})]})},C=function(e,t){return t.some((function(t){return t.id===e.id}))},S=function(e,t){var n="tag";return C(e,t)&&(n+=" selected"),n},k=function(e){var t=e.value,n=e.onChange,i=e.onClear;return Object(m.jsxs)("div",{className:"search-container",children:[Object(m.jsx)("input",{type:"text",value:t,onChange:function(e){return n(e.target.value)},placeholder:"Search",className:"search-input"}),i&&Object(m.jsx)("div",{role:"button",onClick:i,className:"search-clear-icon",children:Object(m.jsx)("img",{src:w,alt:"X Icon"})})]})};n(183);var y=function(){var e=Object(i.useState)(!0),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(i.useState)(!1),r=Object(b.a)(a,2),u=r[0],f=r[1],h=Object(i.useState)([]),g=Object(b.a)(h,2),x=g[0],p=g[1],w=Object(i.useState)([]),C=Object(b.a)(w,2),S=C[0],y=C[1],I=Object(i.useState)([]),E=Object(b.a)(I,2),F=E[0],P=E[1],M=Object(i.useState)([]),A=Object(b.a)(M,2),B=A[0],R=A[1],J=Object(i.useState)(""),V=Object(b.a)(J,2),X=V[0],_=V[1],D=v(),H=D.width<=800,W=Object(i.useState)(!1),q=Object(b.a)(W,2),G=q[0],K=q[1],Q=!H||!G;Object(i.useEffect)((function(){Y()}),[]),Object(i.useEffect)((function(){D.width>800&&K(!0)}),[D]);var U,Y=function(){var e=Object(j.a)(d.a.mark((function e(){var t,n,i,a,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!1),c(!0),e.prev=2,e.next=5,fetch("https://study-table-service-assets.s3.us-east-1.amazonaws.com/airtable.json");case 5:return t=e.sent,e.next=8,t.json();case 8:n=e.sent,i=n.tags,a=n.records,P(L(i,"tags")),r=L(a),p(r),y(r),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),f(!0);case 20:return e.prev=20,c(!1),e.finish(20);case 23:case"end":return e.stop()}}),e,null,[[2,17,20,23]])})));return function(){return e.apply(this,arguments)}}(),Z=F.reduce((function(e,t){var n=x.filter((function(e){var n,i;return null===(n=e.fields)||void 0===n||null===(i=n.Tags)||void 0===i?void 0:i.includes(t.name)}));return Object(o.a)(Object(o.a)({},e),{},Object(l.a)({},t.name,n))}),{}),$=function(e){if(R([]),_(e),e.length){var t=z(e,F,x,Z);y(t)}else y(x)},ee=Object(m.jsxs)(m.Fragment,{children:[Object(m.jsxs)("div",{onClick:function(){return K(!G)},className:"mobile-filter-toggle",style:G?{justifyContent:"flex-start",paddingLeft:"1em"}:{},children:[G?"\u2190 View Artists":"+ View Tags",!G&&!!B.length&&" (".concat(B.length,")")]}),!G&&Object(m.jsx)(k,{value:X,onChange:_})]});return U=n?Object(m.jsx)("div",{className:"loading",children:Object(m.jsx)("div",{children:"Loading Artists..."})}):u?Object(m.jsx)("div",{className:"loading",children:Object(m.jsx)("div",{children:"Something went wrong. Please try reloading the page."})}):Object(m.jsxs)("div",{className:"main",children:[Object(m.jsx)(N,{data:F,active:B,onSelect:function(e){var t;if(_(""),t=B.some((function(t){return t.id===e.id}))?B.filter((function(t){return t.id!==e.id})):[].concat(Object(s.a)(B),[e]),R(t),t.length){var n=T(t,x);y(n)}else y(x)},onClear:function(){return R([])},visible:G,windowSize:D}),Object(m.jsx)(O,{data:S,visible:Q,windowSize:D,mobile:H})]}),Object(m.jsxs)("div",{className:"app",children:[H?!n&&!u&&ee:Object(m.jsx)(k,{value:X,onChange:$,onClear:function(){return $("")}}),U]})},L=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"artists";return"artists"===t?e.sort((function(e,t){var n,i;return(null===(n=e.fields)||void 0===n?void 0:n.Name)>(null===(i=t.fields)||void 0===i?void 0:i.Name)?1:-1})):"tags"===t?e.sort((function(e,t){return e.name>t.name?1:-1})):void 0},z=function(e,t,n,i){var c,a=e.toLowerCase().trim(),r=a.split(" "),l=r.length>1,o=n.filter((function(e){return e.fields.Name.toLowerCase().includes(a)})),u=l?t.filter((function(e){return a.includes(e.name.toLowerCase())})):[];if(o.length&&l)c=[];else if(u.length)c=T(u,n);else if(l){var d=r.reduce((function(e,n){var i=t.filter((function(e){return n.includes(e.name.toLowerCase())}));return[].concat(Object(s.a)(e),Object(s.a)(i))}),[]);c=T(d,n)}else{c=t.filter((function(e){return e.name.toLowerCase().includes(a)})).reduce((function(e,t){return e.concat(i[t.name])}),[])}var j,b=(j=[].concat(Object(s.a)(c),Object(s.a)(o)),Object(s.a)(new Map(j.map((function(e){return[e.id,e]}))).values()));return L(b)},T=function(e,t){var n=e.length,i=t.reduce((function(t,i){var c=0;return e.forEach((function(e){var t;(null===(t=i.fields.Tags)||void 0===t?void 0:t.includes(e.name))&&c++})),c===n?[].concat(Object(s.a)(t),[i]):t}),[]);return L(i)},I=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,185)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),a(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(y,{})}),document.getElementById("root")),I()},73:function(e,t,n){}},[[184,1,2]]]);
//# sourceMappingURL=main.066e74a2.chunk.js.map